(this.webpackJsonpbooksclient=this.webpackJsonpbooksclient||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(1),r=n.n(o),s=n(9),a=n.n(s),u=(n(16),n(2)),i=n.n(u),l=n(10),p=n(4),f=n(3);n(8);var b=function(e){var t=e.addBook,n=e.setIsLoading,r=e.bookToEdit,s=e.setBooks,a=e.setMessage,u=e.fetchWithCsrf,l=Object(o.useState)(""),b=Object(f.a)(l,2),h=b[0],d=b[1],j=Object(o.useState)(""),k=Object(f.a)(j,2),O=k[0],m=k[1],x=Object(o.useState)(0),g=Object(f.a)(x,2),v=g[0],y=g[1];function C(){return(C=Object(p.a)(i.a.mark((function e(c){var o,r,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),o={method:"POST",body:JSON.stringify(c)},e.prev=2,e.next=5,u("".concat("https://books-backend-ssp.herokuapp.com","/books"),o);case 5:return r=e.sent,e.next=8,r.json();case 8:s=e.sent,r.ok?(console.log("async createBook: received response ".concat(JSON.stringify(s))),t(s),a("Book added successfully."),console.log("createBook: done")):(console.log("async createBook: ERROR: ".concat(r.status," - ").concat(s.error," - ").concat(s.message)),l=s.errors&&s.errors.reduce((function(e,t){return"".concat(e," ").concat(t.defaultMessage," ---")}),"--- "),a(l||s.message)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),a("Connection error.");case 16:n(!1);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function E(){return(E=Object(p.a)(i.a.mark((function e(t){var n,c,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"PUT",body:JSON.stringify({id:t.id,title:h,author:O,priceInEuro:v})},e.prev=1,e.next=4,u("".concat("https://books-backend-ssp.herokuapp.com","/books/").concat(t.id),n);case 4:return c=e.sent,e.next=7,c.json();case 7:o=e.sent,console.log(o),c.ok?(a("Book edited successfully."),console.log("createBook: done"),s(o)):(r=o.errors&&o.errors.reduce((function(e,t){return"".concat(e," ").concat(t.defaultMessage," ---")}),"--- "),a(r||o.message)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),a("Connection error.");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){r&&(d(r.title),m(r.author),y(r.priceInEuro))}),[r]),Object(c.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault()},children:["Title:",Object(c.jsx)("input",{className:"form__input",type:"text",onChange:function(e){return d(e.target.value)},value:h,pattern:"(.|\\s)*\\S(.|\\s)*"}),"Author:",Object(c.jsx)("input",{className:"form__input",type:"text",onChange:function(e){return m(e.target.value)},value:O,pattern:"(.|\\s)*\\S(.|\\s)*"}),"Price:",Object(c.jsx)("input",{className:"form__input",type:"number",min:0,max:2e3,value:v,onChange:function(e){return y(parseInt(e.target.value))}}),Object(c.jsx)("button",{className:"form__button",onClick:function(){return function(e){return C.apply(this,arguments)}({title:h,author:O,priceInEuro:v})},children:"Bevestigen"}),Object(c.jsx)("button",{className:"form__button",onClick:null!==r?function(){return function(e){return E.apply(this,arguments)}(r)}:console.log("Deze boek bestaat niet."),children:"Bewerken"})]})};var h=function(){var e=Object(o.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(!1),a=Object(f.a)(s,2),u=a[0],h=a[1],d=Object(o.useState)(null),j=Object(f.a)(d,2),k=j[0],O=j[1],m=Object(o.useState)(""),x=Object(f.a)(m,2),g=x[0],v=x[1],y=Object(o.useState)(null),C=Object(f.a)(y,2),E=C[0],S=C[1];function w(){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,t={method:"GET",credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"}},e.next=5,fetch("".concat("https://books-backend-ssp.herokuapp.com","/books"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:c=e.sent,r(c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),v("Connection error.");case 16:h(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function N(){return(N=Object(p.a)(i.a.mark((function e(t,n){var c,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"GET",credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8",authorization:"Basic "+window.btoa("talha:talha")}},e.next=3,fetch("".concat("https://books-backend-ssp.herokuapp.com","/authenticate"),c);case 3:return o=e.sent,e.next=6,o.json();case 6:r=e.sent,S(r.username);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),c=0;c<n.length;c++){for(var o=n[c];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}function I(e,t){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(i.a.mark((function e(t,n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:n.method,credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8","X-XSRF-TOKEN":"".concat(T("XSRF-TOKEN"))},body:n.body},e.next=3,fetch(t,c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(p.a)(i.a.mark((function e(t){var n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE"},e.prev=1,e.next=4,I("".concat("https://books-backend-ssp.herokuapp.com","/books/").concat(t.id),n);case 4:return c=e.sent,e.next=7,c.json();case 7:o=e.sent,c.ok?(v("Book deleted successfully."),r(o)):v("".concat(o.message)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),v("Connection error.");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){!function(e,t){N.apply(this,arguments)}()}),[]),Object(o.useEffect)((function(){w()}),[E]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("button",{onClick:function(){return w()},children:"Refresh"}),!!u&&Object(c.jsx)("p",{children:"LOADING DATA"}),E&&Object(c.jsxs)("span",{children:["logged in as ",E]}),Object(c.jsx)("span",{children:g}),n.map((function(e){return Object(c.jsxs)("p",{className:"book",onClick:function(){return O(e)},style:{backgroundColor:"".concat(k===e?"grey":"transparent")},children:["title: ",e.title+" - ","author: ",e.author+" - ","price: ",e.priceInEuro,Object(c.jsx)("button",{onClick:function(){return function(e){return R.apply(this,arguments)}(e)},children:"Delete"})]},e.id)})),Object(c.jsx)(b,{bookToEdit:k,setIsLoading:h,addBook:function(e){return r([].concat(Object(l.a)(n),[e]))},setBooks:r,setMessage:v,fetchWithCsrf:I})]})};a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root"))},8:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.8bfff7d1.chunk.js.map